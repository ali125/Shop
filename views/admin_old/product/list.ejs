<%- include('../layout/header'); %>

<div class="head-page">
    <h1><%= title %></h1>
    <a href="/admin/products/add" class="btn btn-success">افزودن محصول</a>
</div>

<% if(products.length > 0) { %>
<table class="table">
    <thead>
    <tr>
        <th scope="col">#</th>
        <th scope="col">عکس</th>
        <th scope="col">عنوان</th>
        <th scope="col">عنوانک</th>
        <th scope="col">توضیحات</th>
        <th scope="col">دسته بندی</th>
        <th scope="col"></th>
    </tr>
    </thead>
    <tbody>
        <% products.forEach(product =>{ %>
        <tr>
            <th scope="row"><%= product.id %></th>
            <td>
                <% if(product.image_url) { %>
                    <img src="<%= product.image_url %>" alt="<%= product.title %>" />
                <% } else if(product.media.length > 0) { %>
                    <img src="/uploads/products/<%= product.media[0].filename %>" alt="<%= product.title %>" />
                <% } %>
            </td>
            <td><%= product.title %></td>
            <td><%= product.slug %></td>
            <td><%= product.short_description %></td>
            <td>
                <% product.categories.forEach(category =>{ %>
                    <span class="badge badge-info"><%= category.name %></span>
                <% }); %>
            </td>
            <td>
                <a href="/admin/products/<%= product.id %>/edit" class="btn btn-sm btn-warning">ویرایش</a>
                <a href="/admin/products/<%= product.id %>/delete" class="btn btn-sm btn-danger">حذف</a>
            </td>
        </tr>
        <% }); %>
    </tbody>
</table>

<% } else { %>
    <h1>محصولی یافت نشد.</h1>
<% } %>


<%- include('../layout/footer'); %>
